{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Video Call | CalmConnect</title>
    <link rel="icon" type="image/x-icon" href="{% static 'mentalhealth/img/favicon.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div class="container" style="max-width: 800px; margin: 2rem auto; padding: 2rem; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
    <div class="header" style="text-align: center; margin-bottom: 2rem;">
        <h1 style="color: #2ecc71; margin-bottom: 0.5rem;">ðŸŽ¥ Video Call Test</h1>
        <p style="color: #666;">Testing video call functionality for appointment</p>
    </div>

    <div class="appointment-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50; margin-bottom: 1rem;">Appointment Details</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div>
                <strong>Student:</strong> {{ appointment.user.full_name }}<br>
                <strong>Counselor:</strong> {{ appointment.counselor.name }}<br>
                <strong>Date:</strong> {{ appointment.date }}<br>
                <strong>Time:</strong> {{ appointment.time|time:"h:i A" }}
            </div>
            <div>
                <strong>Session Type:</strong> {{ appointment.get_session_type_display }}<br>
                <strong>Status:</strong> {{ appointment.get_status_display }}<br>
                <strong>Room ID:</strong> {{ live_session.room_id }}<br>
                <strong>Session Status:</strong> {{ live_session.get_status_display }}
            </div>
        </div>
    </div>

    <div class="video-call-section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem;">ðŸŽ¥ Join Video Call</h2>
        <p style="margin-bottom: 1.5rem; opacity: 0.9;">Click the button below to join your video counseling session</p>
        
        <a href="{{ video_call_url }}" target="_blank" style="display: inline-block; background: white; color: #667eea; padding: 1rem 2rem; text-decoration: none; border-radius: 25px; font-weight: bold; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
            <i class="bx bxs-video" style="margin-right: 0.5rem;"></i>Join Video Call
        </a>
        
        <div style="margin-top: 1.5rem; font-size: 0.9rem; opacity: 0.8;">
            <p><strong>Video Call URL:</strong></p>
            <p style="word-break: break-all; background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
                {{ video_call_url }}
            </p>
        </div>
    </div>

    <div class="instructions" style="background: #e8f5e8; border: 1px solid #2ecc71; border-radius: 10px; padding: 1.5rem; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50; margin-bottom: 1rem;">How to Test</h3>
        <ol style="margin: 0; padding-left: 1.5rem; color: #2c3e50;">
            <li>Click the "Join Video Call" button above</li>
            <li>Allow camera and microphone access when prompted</li>
            <li>Wait in the virtual waiting room</li>
            <li>Test the video and audio functionality</li>
            <li>Try the chat feature in the sidebar</li>
        </ol>
    </div>

    <div class="actions" style="display: flex; gap: 1rem; justify-content: center;">
        <a href="{% url 'scheduler' %}" style="background: #f8f9fa; color: #2c3e50; padding: 0.8rem 1.5rem; text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s ease;">
            <i class="bx bx-arrow-back" style="margin-right: 0.5rem;"></i>Back to Scheduler
        </a>
        <a href="{% url 'user-profile' %}" style="background: #2ecc71; color: white; padding: 0.8rem 1.5rem; text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s ease;">
            <i class="bx bxs-user" style="margin-right: 0.5rem;"></i>My Profile
        </a>
    </div>
</div>
</body>
</html> 